<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>combination-box fixture</title>
    <link href="https://fonts.googleapis.com/css?family=Quicksand:400,500,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./styles.css">
  </head>
  <body id="demo">
    <h1>Combination Box</h1>
    <section class="bands">
      <div class="wrp">
        <h2>Single select</h2>
        <label for="combobox-single">Choose Band</label>
        <div class="combo-wrap">
          <input type="text" class="combobox" id="combobox-single">
          <i aria-hidden="true" class="fa trigger fa-caret-down" data-trigger="single"></i>
          <div class="listbox">
            <div class="option">Ween</div>
            <div class="option">Frank Zappa</div>
            <div class="option">Snarky Puppy</div>
            <div class="option">Umphrey's McGee</div>
            <div class="option">Keller Williams</div>
            <div class="option">Greensky Bluegrass</div>
            <div class="option">Leftover Salmon</div>
            <div class="option">Moe.</div>
            <div class="option">Family Groove Company</div>
            <div class="option">Mac Demarco</div>
            <div class="option">Lettuce</div>
          </div>
        </div>
      </div>
      <button type="button">Submit</button>
    </section>
    <section class="categories">
      <div class="wrp">
        <h2>Single select with option groups</h2>
        <label for="combobox-single-with-groups">Choose Category</label>
        <div class="combo-wrap">
          <input type="text" class="combobox" id="combobox-single-with-groups">
          <i aria-hidden="true" class="fa trigger fa-caret-down" data-trigger="single-with-groups"></i>
          <div class="listbox">
            <div class="optgroup">
              <div class="optgroup-label">Clothing</div>
              <div class="option">Shirts</div>
              <div class="option">Shorts</div>
              <div class="option">Pants</div>
            </div>
            <div class="optgroup">
              <div class="optgroup-label">Electronics</div>
              <div class="option">TVs</div>
              <div class="option">Game consoles</div>
              <div class="option">Music equipment</div>
            </div>
            <div class="optgroup">
              <div class="optgroup-label">Sporting Goods</div>
              <div class="option">Fishing</div>
              <div class="option">Kayaking</div>
              <div class="option">Rock climbing</div>
            </div>
          </div>
        </div>
      </div>
      <button type="button">Submit</button>
    </section>
    <section class="multiselect">
      <div class="wrp">
        <h2>Multi select</h2>
        <label for="combobox-multiselect">Choose Favorite Food</label>
        <div class="combo-wrap">
          <input type="text" class="combobox" id="combobox-multiselect">
          <i aria-hidden="true" class="fa trigger fa-caret-down" data-trigger="multiselect"></i>
          <div class="listbox">
            <div class="option">Pizza</div>
            <div class="option">Sushi</div>
            <div class="option">Tacos</div>
            <div class="option">Salmon</div>
            <div class="option">Cheeseburger</div>
            <div class="option">Bacon Cheeseburger</div>
            <div class="option">Steak</div>
            <div class="option">Fried Chicken</div>
            <div class="option">Chicken Salad</div>
            <div class="option">Tatar Tots</div>
            <div class="option">French Fries</div>
          </div>
        </div>
      </div>
      <button type="button">Submit</button>
    </section>
    <footer></footer>
    <script src="../dist/combination-box.js" charset="utf-8"></script>
    <script>
      (function () {
        var box = {
          'single': new Combobox({
            input: '#combobox-single',
            list: '.bands .listbox',
            activeClass: 'active'
          }),
          'single-with-groups': new Combobox({
            input: '#combobox-single-with-groups',
            list: '.categories .listbox',
            groups: '.optgroup',
            activeClass: 'active'
          }),
          'multiselect': new Combobox({
            input: '#combobox-multiselect',
            list: '.multiselect .listbox',
            activeClass: 'active'
          })
        };

        window.box = box;

        // handle trigger clicks to toggle state of its combobox
        Array.prototype.slice.call(
          document.querySelectorAll('.trigger')
        ).forEach(function (trigger) {
          const instName = trigger.getAttribute('data-trigger');
          const inst = box[instName];
          trigger.addEventListener('click', function (e) {
            e.stopPropagation();
            console.log('clicked!?!?!');
            console.log(inst.isOpen);
            inst[inst.isOpen ? 'closeList' : 'openList']();
          });
        });
      }());
    </script>
  </body>
</html>
